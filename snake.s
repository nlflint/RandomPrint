.list
.code

PIXEL_POINTER = $06
LIGHT_GREY = $AA

FIRST_COLUMN = 0
LAST_COLUMN = 39

FIRST_ROW = 0
LAST_ROW = 19


MAIN:
JSR ENABLE_LOW_RES
JSR CLEAR_SCREEN
;JSR SHOW_TITLE
;JSR CLEAR_SCREEN
JSR DRAW_STATIC_GFX
;JSR START_GAME
JMP Done


ENABLE_LOW_RES:
 STA $C050
 STA $C053
 STA $C055
 STA $C00C
 STA $C054
 RTS

CLEARING_ROW: .byte $00
CLEAR_SCREEN:
 LDA #00
 STA FILL_ROW_VALUE
 LDA #LAST_ROW
 STA CLEARING_ROW
CLEARING_LOOP:
 LDA CLEARING_ROW
 BMI CLEAR_SCREEN_DONE
 STA FILL_ROW_NUMBER
 JSR FILL_ROW
 DEC CLEARING_ROW
 JMP CLEARING_LOOP
CLEAR_SCREEN_DONE:

 ;clear last 4 lines of text
 LDA #$20
 ORA #%10000000
 STA FILL_ROW_VALUE
 
 LDA #20
 STA FILL_ROW_NUMBER
 JSR FILL_ROW

 LDA #21
 STA FILL_ROW_NUMBER
 JSR FILL_ROW

 LDA #22
 STA FILL_ROW_NUMBER
 JSR FILL_ROW

 LDA #23
 STA FILL_ROW_NUMBER
 JSR FILL_ROW

 RTS

DRAW_STATIC_GFX:
 JSR DRAW_GAME_BOX
 ;JSR DRAW_SCORE_LABEL
 RTS


DRAW_GAME_BOX:
 LDA #LIGHT_GREY
 STA FILL_ROW_VALUE

 LDA #FIRST_ROW
 STA FILL_ROW_NUMBER
 JSR FILL_ROW

 LDA #LAST_ROW
 STA FILL_ROW_NUMBER
 JSR FILL_ROW

 LDA #LIGHT_GREY
 STA FILL_COLUMN_VALUE
 LDA #FIRST_COLUMN
 STA FILL_COLUMN_NUMBER
 JSR FILL_COLUMN

 LDA #LAST_COLUMN
 STA FILL_COLUMN_NUMBER
 JSR FILL_COLUMN

 RTS


FILL_ROW_NUMBER: .byte $00
FILL_ROW_VALUE: .byte $00
FILL_ROW:
 LDX FILL_ROW_NUMBER
 LDA LO,X
 STA PIXEL_POINTER
 LDA HI,X
 STA PIXEL_POINTER+1
 LDA FILL_ROW_VALUE
 LDY #LAST_COLUMN
FILL_ROW_LOOP:
 STA (PIXEL_POINTER), Y
 DEY
 BPL FILL_ROW_LOOP
 RTS


FILL_COLUMN_NUMBER: .byte $00
FILL_COLUMN_VALUE: .byte $00
FILL_COLUMN:
 LDX #LAST_ROW
 LDY FILL_COLUMN_NUMBER
FILL_COLUMN_LOOP:
 LDA LO,X
 STA PIXEL_POINTER
 LDA HI,X
 STA PIXEL_POINTER+1
 LDA FILL_COLUMN_VALUE
 STA (PIXEL_POINTER), Y
 DEX
 BPL FILL_COLUMN_LOOP
 RTS
 
TEXT_ADDR: .byte $00,$00
DESTINATION_ADDR: .byte $00,$00
COPY_TEXT_TO:
 RTS
 

Done:
JMP Done

START_GAME:
 ;

ScoreText: .byte "Score",0

; Low-res square row map
HI: .byte $04,$04,$05,$05,$06,$06,$07,$07
.byte $04,$04,$05,$05,$06,$06,$07,$07
.byte $04,$04,$05,$05,$06,$06,$07,$07

LO: .byte $00,$80,$00,$80,$00,$80,$00,$80
.byte $28,$A8,$28,$A8,$28,$A8,$28,$A8
.byte $50,$D0,$50,$D0,$50,$D0,$50,$D0